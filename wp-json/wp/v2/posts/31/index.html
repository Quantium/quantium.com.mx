{"id":31,"date":"2007-03-12T11:24:20","date_gmt":"2007-03-12T16:24:20","guid":{"rendered":"http:\/\/www.quantium.com.mx\/qlog\/2007\/03\/12\/actionscript-3-mato-al-singleton\/"},"modified":"2007-03-12T12:01:52","modified_gmt":"2007-03-12T17:01:52","slug":"actionscript-3-mato-al-singleton","status":"publish","type":"post","link":"http:\/\/www.quantium.com.mx\/2007\/03\/12\/actionscript-3-mato-al-singleton\/","title":{"rendered":"ActionScript 3 Mat\u00f3 al singleton"},"content":{"rendered":"<p>Cual ser\u00e1 mi sorpresa cuando leyendo la documentaci\u00f3n de AS3 me doy cuenta de que este no permite <strong>contructores privados<\/strong>, por ende para poder hacer un s\u00edngleton hay que tirar unas execpciones en el constructor al cual se le pasa un <em>this<\/em> como par\u00e1metro para verificar que el ejecutor sea la clase. Adem\u00e1s de que se verif\u00edca que el caller sea la funci\u00f3n que adignada, que por cierto no puede ser un get impl\u00edcito porque cuando haces una comparaci\u00f3n cualquier get implicito te devolver\u00eda el valor asignado y nunca la funci\u00f3n.<\/p>\n<p>Un ejemplo de como hacerlo es as\u00ed:<\/p>\n<p>[ftf]<br \/>\npublic class Singleton<br \/>\n\t\tprivate static var _instance : Singleton;<br \/>\n\t\t\/\/N\u00f3tese el &#8216;public&#8217; en el constructor<br \/>\n\t\tpublic function Singleton($caller : Function = null )<br \/>\n\t\t{<br \/>\n\t\t\tif ($caller != Singleton.getInstance )<br \/>\n\t\t\t{<br \/>\n\t\t\t\t\/\/Ahora hasta hay que aclarar<br \/>\n\t\t\t\tthrow new Error (&#8220;No puedes usar el constructor, &#8216;Singleton&#8217; es un singleton&#8221;);<br \/>\n\t\t\t}<br \/>\n\t\t\tif (_instance != null )<br \/>\n\t\t\t{<br \/>\n\t\t\t\t\/\/Nunca cre\u00ed que tendr\u00eda que tirar un error de este tipo<br \/>\n\t\t\t\tthrow new Error (&#8220;S\u00f3lo puede existir un singleton&#8221; );<br \/>\n\t\t\t}<br \/>\n\t\t}<br \/>\n\t\tinternal static function getInstance () : Singleton<br \/>\n\t\t{<br \/>\n\t\t\tif (_instance == null)<br \/>\n\t\t\t{<br \/>\n\t\t\t\t_instance = new Singleton(arguments.callee);<br \/>\n\t\t\t}<br \/>\n\t\t\treturn _instance;<br \/>\n\t\t}<br \/>\n}<br \/>\n[\/ftf]<\/p>\n<p>Cabe mencionar que aunque se tirar excepciones el constructor s\u00ed se ejecuta, entonces habr\u00eda que cachar la excepci\u00f3n y <em>destruir<\/em> la instancia creada.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Cual ser\u00e1 mi sorpresa cuando leyendo la documentaci\u00f3n de AS3 me doy cuenta de que este no permite contructores privados, por ende para poder hacer un s\u00edngleton hay que tirar unas execpciones en el constructor al cual se le pasa un this como par\u00e1metro para verificar que el ejecutor sea la clase. Adem\u00e1s de que [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[7,5,1],"tags":[],"_links":{"self":[{"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/posts\/31"}],"collection":[{"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/comments?post=31"}],"version-history":[{"count":0,"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/posts\/31\/revisions"}],"wp:attachment":[{"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/media?parent=31"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/categories?post=31"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/www.quantium.com.mx\/wp-json\/wp\/v2\/tags?post=31"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}